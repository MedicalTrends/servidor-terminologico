<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:smtk="http://java.sun.com/jsf/composite/smtk"
      xmlns:p="http://primefaces.org/ui">

<composite:interface>
    <composite:attribute name="generalQuery" type="cl.minsal.semantikos.model.queries.GeneralQuery" />
</composite:interface>
<composite:implementation>

    <div class="layout-rightpanel">
        <div class="nano">
            <div class="nano-content right-panel-scroll-content">
                <div class="layout-rightpanel-header">
                    <div class="weather-day">Herramientas</div>
                </div>

                <div class="layout-rightpanel-content" style="padding: 0px">

                    <h:form>

                        <p:panel header="Filtrar" rendered="#{not empty cc.attrs.generalQuery.filters}">
                            <div class="ui-g ui-fluid">
                                <p:repeat
                                        offset="0"
                                        size="#{cc.attrs.generalQuery.filters.size()}"
                                        step="1"
                                        varStatus="var"
                                        value="#{cc.attrs.generalQuery.filters}"
                                        var="filter">

                                    <smtk:basicTypeFilter relationshipDefinition="#{filter.definition}"
                                                          targetDefinition="#{filter.definition.targetDefinition}"
                                                          targets="#{filter.targets}"
                                                          multiple="#{filter.multiple}"
                                                          rendered="#{filter.definition.targetDefinition.basicType}" />

                                    <smtk:helperTableTypeFilter
                                            relationshipDefinition="#{filter.definition}"
                                            targetDefinition="#{filter.definition.targetDefinition}"
                                            targets="#{filter.targets}"
                                            rendered="#{filter.definition.targetDefinition.helperTable and not filter.multiple }" />

                                    <smtk:helperTableTypeFilterListBox
                                            relationshipDefinition="#{filter.definition}"
                                            targetDefinition="#{filter.definition.targetDefinition}"
                                            targets="#{filter.targets}"
                                            rendered="#{filter.definition.targetDefinition.helperTable and not filter.multiple and filter.composite eq 11 }" />

                                    <smtk:smtkTypeFilter relationshipDefinition="#{filter.definition}"
                                                         targetDefinition="#{filter.definition.targetDefinition}"
                                                         targets="#{filter.targets}"
                                                         multiple="#{filter.multiple}"
                                                         rendered="#{filter.definition.targetDefinition.SMTKType}" />

                                </p:repeat>

                                <p:repeat
                                        offset="0"
                                        size="#{cc.attrs.generalQuery.attributeFilters.size()}"
                                        step="1"
                                        varStatus="var"
                                        value="#{cc.attrs.generalQuery.attributeFilters}"
                                        var="attributeFilter">

                                    <smtk:helperTableTypeAttributeFilter
                                            relationshipAttributeDefinition="#{attributeFilter.definition}"
                                            targetDefinition="#{attributeFilter.definition.targetDefinition}"
                                            targets="#{attributeFilter.targets}"
                                            rendered="#{attributeFilter.definition.targetDefinition.helperTable and not attributeFilter.multiple}" />

                                </p:repeat>

                                <smtk:DateTypeFilter date="#{cc.attrs.generalQuery.creationDateSince}" name="Ingresados Desde"
                                                     dateSince="#{true}"
                                                     rendered="#{cc.attrs.generalQuery.customFilterable}" />
                                <smtk:DateTypeFilter date="#{cc.attrs.generalQuery.creationDateTo}" name="Ingresados Hasta"
                                                     dateSince="#{false}"
                                                     rendered="#{cc.attrs.generalQuery.customFilterable}" />
                                <smtk:userTypeFilter user="#{cc.attrs.generalQuery.user}" name="Usuario"
                                                     rendered="#{cc.attrs.generalQuery.customFilterable}" />



                                <p:outputPanel styleClass="filterStatus">

                                </p:outputPanel>

                            </div>
                        </p:panel>

                        <p:panel header="Ordenar">
                            <div class="ui-g ui-fluid">
                                <div class="ui-g-12">
                                    <span><h:outputText value="Ordenar Por" /></span>
                                </div>
                                <div class="ui-g-12">
                                    <p:selectOneRadio value="#{cc.attrs.generalQuery.order}" layout="responsive" columns="1">
                                        <f:selectItem itemLabel="ConceptID" itemValue="1" />
                                        <f:selectItem itemLabel="TÃ©rmino" itemValue="2" />
                                        <p:ajax event="change"
                                                update="@(.browserFilters),@(.browserTable)"
                                                process="@this"/>
                                    </p:selectOneRadio>
                                </div>
                                <div class="ui-g-12">
                                    <span><h:outputText value="Ascendente" /></span>
                                </div>
                                <div class="ui-g-12">
                                    <p:selectOneRadio value="#{cc.attrs.generalQuery.asc}" layout="responsive" columns="1">
                                        <f:selectItem itemLabel="Asc" itemValue="asc" />
                                        <f:selectItem itemLabel="Desc" itemValue="desc" />
                                        <p:ajax event="change"
                                                update="@(.browserFilters),@(.browserTable)"
                                                process="@this"/>
                                    </p:selectOneRadio>
                                </div>
                            </div>
                        </p:panel>

                    </h:form>


                </div>
            </div>
        </div>

    </div>

</composite:implementation>
</html>
