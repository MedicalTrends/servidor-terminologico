<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<composite:interface>
    <composite:attribute name="refset" type="cl.minsal.semantikos.model.RefSet"/>
</composite:interface>

<composite:implementation>

    <p:dialog widgetVar="selectConcept" modal="true" showEffect="fade"
              hideEffect="fade" resizable="true" style="margin:40px;">
        <p:outputPanel id="selectConceptPanel" styleClass="selectConcept">
            <div class="ui-g">
                <div class="ui-g-12 ui-md-6 ui-lg-5">
                    <p:autoComplete id="inputFindConcept" scrollHeight="200" size="5" style="width: 300px;"
                                    inputStyle="width: 300px;"
                                    converter="conceptConverter" var="concept"
                                    value="#{refsetsBean.conceptSMTK}"
                                    completeMethod="#{findConceptBean.getConceptSearchInputAndCategories}"
                                    itemLabel="#{concept.descriptionFavorite.term}" itemValue="#{concept}"
                                    emptyMessage="No se encontraron conceptos relacionados"
                                    placeholder="Buscar concepto por término"/>
                </div>
                <div class="ui-g-12 ui-md-6 ui-lg-5">
                    <p:selectOneMenu value="#{findConceptBean.categorySelected}"
                                     converter="omnifaces.SelectItemsConverter" panelStyle="width:180px"
                                     effect="fade" var="c" style="width:160px" filter="true"
                                     filterMatchMode="startsWith">
                        <p:ajax event="itemSelect"></p:ajax>
                        <f:selectItem itemLabel="Categorías" itemDisabled="true"/>
                        <f:selectItems value="#{findConceptBean.categoryList}" var="category"
                                       itemLabel="#{category.name}" itemValue="#{category}"/>
                        <p:column>
                            <h:outputText value="#{c.name}"/>
                        </p:column>
                    </p:selectOneMenu>
                </div>
                <div class="ui-g-12 ui-md-6 ui-lg-1">
                    <p:commandButton value="Agregar" update="@(.conceptBindRefset)"
                                     actionListener="#{refsetsBean.addConcept(cc.attrs.refset,refsetsBean.conceptSMTK)}" disabled="#{not cc.attrs.refset.valid}">
                        <f:setPropertyActionListener value="" target="#{refsetsBean.conceptSMTK}"/>
                        <f:setPropertyActionListener value="" target="#{findConceptBean.categorySelected}"/>
                    </p:commandButton>
                </div>
            </div>
        </p:outputPanel>
    </p:dialog>



</composite:implementation>
</html>
