<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            <meta name="apple-mobile-web-app-capable" content="yes" />
        </f:facet>
        <title>Recuperación de contraseña</title>
        <ui:insert name="head" />
    </h:head>

        <h:body styleClass="loginbodyblue">
        
        <div class="Wid90 DispBlock MarAuto MarTopPerc5">
            <div class="Wid50 MarAuto WidAutoOnMobile">
                <div style="text-align: center">
                    <h:graphicImage alt="Semantikos" width="180" library="semantikos" name="images/minsal.png" />
                </div>
                <div class="EmptyBox30"></div>
                <div class="Card ShadowEffect">
                    <div class="EmptyBox40"></div>
                    <div class="Wid100 OvHidden Fs30 Blue"><div class="TexAlCenter"><i class="icon-users Fs40" />Recuperación de contraseña</div>
                    <p:outputPanel>
                        <div class="Wid100 OvHidden Fs20 BoldGray" style="text-align: center">Por favor, ingrese su identificación de usuario.</div>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{ false }">
                        <div class="Wid100 OvHidden Fs20 BoldGray" style="text-align: center">Su contraseña ha sido actualizada!! Para ingresar al sistema diríjase al login</div>
                    </p:outputPanel>
                    <div class="EmptyBox20"></div>
                    <div class="Separator"></div>
                    <div class="EmptyBox10"></div>
                    <h:form id="mainForm">
                    <p:growl id="growl" showDetail="true" showSummary="true"/>

                    <p:panelGrid id="email" columns="3" columnClasses="label, value, value" styleClass="Wid100 ui-panelgrid-blank">

                        <p:outputLabel value="E-mail *" style="font-weight: bold" styleClass="#{passwordRecovery.emailError} Wid20" />

                        <p:inputText value="#{passwordRecovery.email}" placeholder="Ingrese su correo electrónico" styleClass="#{passwordRecovery.emailError} Wid90" />

                        <p:commandButton actionListener="#{passwordRecovery.findUser}"
                                         styleClass="ui-priority-primary"
                                         value="Enviar" process="mainForm"
                                         update="growl, mainForm">
                        </p:commandButton>

                    </p:panelGrid>

                    <p:spacer rendered="#{passwordRecovery.user != null}" />

                    <p:panel header="Preguntas de seguridad" rendered="#{passwordRecovery.user != null}">

                        <h:dataTable id="answers" styleClass="answers" style="width: 100%;" value="#{passwordRecovery.user.answers}"
                                     var="answer">

                            <h:column>
                                <p:outputLabel value="#{answer.question.question}" />
                            </h:column>

                            <h:column>
                                <p:inputText value="#{answer.answer}" autocomplete="off" styleClass="Wid90" >
                                    <p:ajax process="@this" update="@this" />
                                </p:inputText>
                            </h:column>

                        </h:dataTable>
                        <div class="Wid100" style="text-align: right">
                            <p:commandButton actionListener="#{passwordRecovery.checkAnswers}"
                                             styleClass="ui-priority-primary"
                                             value="Enviar" process="mainForm"
                                             update="growl, mainForm">
                            </p:commandButton>
                        </div>

                    </p:panel>

                    <p:spacer rendered="#{passwordRecovery.user != null}" />

                    <p:panel header="Cambio de contraseña" rendered="#{passwordRecovery.correctAnswers}">

                        <f:facet name="footer">
                            <p:outputPanel>
                                <i class="fa  fa-info-circle fa-lg" style="padding-right:10px" />
                                <h:outputText value="Actualice su contraseña a una que usted pueda recordar fácilmente" />
                            </p:outputPanel>
                        </f:facet>

                        <p:panelGrid id="password" columns="2" columnClasses="label, value" styleClass="Wid100 ui-panelgrid-blank">

                            <p:outputLabel value="Nueva Contraseña *" style="font-weight: bold" styleClass="#{passwordRecovery.newPassword1Error} Wid20" />

                            <p:password id="new-password" value="#{passwordRecovery.newPassword1}" feedback="true"
                                        promptLabel="Ingrese su nueva contraseña" weakLabel="Poco segura" goodLabel="Aceptable" strongLabel="Segura"
                                        redisplay="true" autocomplete="off"
                                        styleClass="#{passwordRecovery.newPassword1Error} Wid90">
                            </p:password>

                            <p:outputLabel value="Confirmar Contraseña *" style="font-weight: bold" styleClass="#{passwordRecovery.newPassword2Error} Wid20" />

                            <p:password id="new-password2" value="#{passwordRecovery.newPassword2}" feedback="true"
                                        promptLabel="Confirme su nueva contraseña" weakLabel="Poco segura" goodLabel="Aceptable" strongLabel="Segura"
                                        redisplay="true" autocomplete="off"
                                        styleClass="#{passwordRecovery.newPassword2Error} Wid90">
                            </p:password>

                        </p:panelGrid>
                        <div class="Wid100" style="text-align: right">
                            <p:commandButton actionListener="#{passwordRecovery.changePassword}"
                                             styleClass="ui-priority-primary"
                                             value="Enviar" process="mainForm"
                                             update="growl, mainForm">
                            </p:commandButton>
                        </div>
                    </p:panel>

                    </h:form>

                    <p:outputPanel rendered="#{false}">
                        <div class="Wid100" style="text-align: center">
                            <p:button value="Ir al Login" icon="fa a fa-sign-in" href="login.xhtml"/>
                        </div>
                    </p:outputPanel>

                </div>
                <div class="Wid100 TexAlCenter MarTop20 Fs14 FontRobotoRegular WhiteBlue">
                    <i class="fa fa-copyright" />  PrimeFaces RIO Theme And Layout <br/> All rights reserved.
                </div>
            </div>
        </div>
        </div>
        
        <h:outputStylesheet name="css/core-layout.css" library="rio-layout" />
        <h:outputStylesheet name="css/animate.css" library="rio-layout" />
        <h:outputStylesheet name="css/rio-font.css" library="rio-layout" />
        <h:outputStylesheet name="css/ripple-effect.css" library="rio-layout" />
        <h:outputStylesheet name="css/font-awesome.css" library="rio-layout" />
        <h:outputStylesheet name="css/rio-layout.css" library="rio-layout" />
    </h:body>


</html>